# 2022/01/03 日志 Log

## 进展

1. 完成了关于[DAG Blockchain](./Blockchain/../../../Research%20Plans/DAG%20Blockchain.md)中TrusNote 和Hashgrapg部分内容的梳理。
   * 在TrustNote中，在获得新的单元时，每个节点会持续追踪自身的主链。不同节点各自的当前主链也许是不同的，因为他们可能看到不同的非稳定单元的集合。当新单元到达时，当前的主链会不断变化，但是当前主链足够老的那部分会保持不变。因此，未来所有的主链在回溯时最终都会汇聚到某个主链单元。这个主链单元及之前的所有的引用单元都是稳定的。因此，创世单元是一个最初的稳定点。若基于当前的非稳定单元集合构造一条当前主链，并且这条链上已有一些之前认定的稳定节点，随后沿着统一路径回溯。被这个稳定点所引用的单元将获得确定的MCI，包含在这些单元中的所有消息也将被确认。发布交易需要支付交易费用发。节点根据生成单元的字节数计算交易费用。交易费用分为60%的单元引用费和40%的公证费。引用费将被该单元的子单元获得；公证费将被累加到主链中MCI值最接近的公正单元所在共识轮的公正奖金池中。公正单元也需要支付交易非，计算方式与普通单元相同。
   * 在Hashgraph中， 共识算法通过一个拜占庭一致性协议来对事件进行虚拟排序。该算法不需要选举出主节点来对事务进行排序。排序也只需要极小的通信开销，比较适用于在联盟链环境中参与共识的节点数量较多的场景。但是对于公链的场景就有些不足。因为该算法需要知道全网的总数量，且从算法上来看至少需要两轮才能确定当前轮中事务的顺序，算法的效率和事务处理的时效性也许不高。共识算法主要是两个部分：
* 首先随机选择一个节点同步，创建一个新的事务。
* 随后对于当前的所有事务进行排序：
  * 对所有事务划分轮数。每轮中创建的第一个事务就是一个见证； 
  * 随后我们执行局部的拜占庭一致性算法判定当前轮的每个见证是否是著名见证。主要是通过后一轮中的见证来判定当前一轮的见证是否是著名见证。如果后一轮的见证能够“看见”前一轮的那个见证，则会投票为“是”，否则否票为“否”。一旦有超过 $\frac{2n}{3}$ 个都能“看见”前一轮的那个见证，则说明那个见证是著名见证。随后在后两轮中对于投票进行计数。如果后两轮的某个见证能够“强看见“后一轮中的见证，则计数，否则不进行计数。根据最终计数结果来判定最终当前轮的见证是否是著名的。
  * 对于不是见证的事件，是没有投票的。大多数见证者在第一轮投票中几乎一致地投票被宣布是著名的，所以大多数选举不会储蓄较长时间。在确定了当前轮中每个见证的声望之后，就可以为一组的事件找到接收轮和共识时间戳。对于能够被当前轮中每个著名见证看见的事务，其接收轮就是当前轮数。随后在各节点上找到一个事件既是该事件的后代又是当前轮著名见证的祖先。取出这些事件的时间戳，选择中位数时间戳作为该事件的共识时间戳。最终对当前轮所有达成共识的事件（收到了接收轮数的事件）按照所有节点都同意的顺序排序，这个顺序就是共识顺序。这个排序就是通过它们的round received来进行的。通过中位数时间戳来打破联系


## 计划

1. 8：30 ~ 17：00：完成Nano&RaiBlocks相关知识的整理

# Direct Acyclic Graph-based Blockchain for Internet of Things_Performance and Security Analysis(Y.Li&etal, Aug.2020)

## 文章创新点

本文主要调查了网络负载对于基于DAG的账本的性能和安全性的影响。考虑不稳定的网络负载，本文首先提出马尔科夫链模型来捕捉在动态负载情况下时共识过程的行为。基于DAG的账本的主要性能度量指标为累计权重和确认延时，本文通过在提出的模型上本溪这两个指标的变化来衡量性能。随后，本文利用随机过程模型来分析在不同网络负载下双花攻击成功的概率。最终这些分析结果可以用于直到基于DAG的账本的实际部署。

基于PoW和基于PoS的链式区块链系统的不足：
* **吞吐量有限：** 区块中区块的容量是有限的，这使得交易吞吐量通常被限制在几十个交易（Bitcoin:7TPS;Ethereum:20~30TPS）。有限的吞吐量不适用于物联网中呈指数倍增长的节点以及需求。
* **确认延时高：** 低区块生成速率导致比较长的交易确认时延（Bitcoin:60 minutes; Ethereum:3minutes）。生成的区块需要包含高算力或币龄，这也是物联网中的一个瓶颈。
* **公平性：** 只有拥有高算力和高币龄的节点才有权力生成区块。这对于资源有限的物联网不适用，并且物联网也没有办法为每一个节点提供足够的代币。
* 高交易费用：不公平性使得具有专业的和强算力的节点才能成为矿工。这遂于拥有高频微支付的物联网而言，向矿工反馈信息是非常沉重的负担。


## 预定义

### 基本术语

![](./pics6/Figure_1.png)

最为典型的基于DAG的区块链是最初的Tangle，其共识过程如上图所示，下面给出相关定义：
* **区块：** 记录交易、数字签名和哈希值的存储单位；
* **Tips：** 尚未有任何支持的交易（区块）；
* **直接支持：** 两个交易之间只存在一条直接相连的有向边；
* **间接支持：** 两个交易（区块）之间存在多跳时，则是间接支持；
* **自权重：** 交易的自权重与发起者投入的工作量成比例；
* **累积权重：** 一个交易所有支持交易权重的总和加上交易本身的自权重。

### 共识过程

节点对于新交易达成共识的主要过程如下：
* 节点创建一个存储单位来存储新交易；
* 该节点根据马尔科夫链蒙特卡洛选择算法选择两个Tips作为被支持的交易；
* 该节点找到一个随机数可以解决一个密码学难题（类似于PoW，但是不会有很大的难度）；
* 该节点利用私钥对新交易签名并广播到其他节点；
* 当其他节点接收到该交易后，根据签名和随机数来检查交易的合法性来决定是否接受该交易。

### 分叉问题和解决办法

在分布式账本中，构建分叉以重做工作是篡改存储数据的唯一方法。基于此，双花攻击的主要思想是将两个冲突交易并行放置在同一区块链系统的两个分支链上。在第一个交易用于服务之后支付费用，攻击者会扩展包含冲突交易的链，并让它超过诚实交易所在的分支链。当此操作成功时，第一个交易将被孤立并且攻击者在获得服务的情况下不需要支付费用，攻击者可以多次使用相同的代币。

为了处理分叉问题，不同结构的区块链将采取不同的方法。链式区块链通常采用最长链原则。节点为了最大化自身的利益，通常会选取更长的分支作为主链，并继续增长该链。而图式区块链则采用最重链原则。理性的节点通常使用MCMC(马尔科夫链蒙特卡洛算则算法)来扩展最重的DAG。拥有较少覆盖的累积权重的子DAG渐渐地将不再被新的交易所支持。具体图示如下：
![](./pics6/Figure_2.png)


## 共识过程的马尔科夫链模型


## 性能分析



## 双花攻击模型


## 安全性分析


## 数值结果和讨论
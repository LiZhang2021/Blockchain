# Comparison of single and multiple entry point PBFT for IoT blockchain Systems(J.Misic&etal, 2020)
主要从文章创新点、系统模型、协议框架、协议分析、性能估计以及最终结论几个部分来介绍本文。

## 文章创新点

本文以以单个和多个接入点的PBFT系统作为模型，并且比较他们的性能。本文使用CSMA/CA算法在全连接的P2P网络上实现了多入口系统。通过增加系统负载和地理覆盖面积比较有四个orderers时的两个系统的性能。最终结果表明拥有四个接入点的系统的容量是只有一个接入口系统的容量的两倍。

## 系统模型

1. 假设交易在ordering系统之外就已经被验证（系统只关注交易之间的全序）；
2. 假设物联网系统是由多个物联网域组成，并且每个域至少有一个代理，代理主要用于从管理感应设备的网关处收集数据，并按序在发送交易之前验证交易；
3. 每个代理都与至少一个orderder（实际执行共识协议并维护副本）相连；
4. 请求服务器之间是通过使用TCP连接的覆盖网络互联；
5. 每个order都有一个交易池用于存储交易记录；
6. 假设有 $n = 3f + 1$个oderders，插入服务能够在存在$f$个错误orderers的情况下，属于所有orderers的交易池中的交易或记录都能实现相同全序；
7. order可以打包记录（或交易）到区块中，添加区块链和元数据，并提交给其他orderers来获取支撑。
8. 所有被TCP网络覆盖的orderers是全连接的，每个orderer持续侦听相应TCP套接字的所有peers。

## 协议分析

1. 多点接入和媒体预约协议(Medium reservation protocol, MRP):对于多点接入，会存在争用问题，这个问题可以通过MRP来解决。由于信号传播时间有限，这个协议过程容易出现RTS请求冲突。提出两个参数来确保传输可信性：脆弱时间长度，超时时间长度。
2. 单接口和多接口PBFT协议
   * 单个或多个接入口的PBFT协议在Pre-Prepare阶段有所不同:1）当单个接入口时，leader节点完成之前记录（交易）插入并接收到$2f+1$条提交消息之后，开始新一轮的Pre-prepare消息发送，不存在争用问题； 2）多接入口时，orderers通过Bandwidth Reservation Protocol来解决多接口争用问题，当接收到$2f$条CTS消息后，才确定当前orderder竞争成功，再广播Pre-prepare消息开始PBFT协议的运行。
   * 接收到Pre-prepare消息节点，验证消息内容后，发送Prepare消息给所有节点；
   * 当节点接收到$2f$条Prepare消息后，将会发送Commit消息给所有节点；
   * 当节点接收到$2f+1$条Commit消息后，将开始新的一轮。
3. 单接口接入和多接口接入不同之处在于媒体预约阶段(Medium reservation phase)，因此记录/交易插入时间（Recorde Insertion Time）是主要时间延时中的核心内容。单向传播延时的概率分布可以由节点之间的距离得到。单向延迟的累积分布函数（CDF）可使用常数$s_0$导出为： $D(u) = \frac{(6u^2\pi(S_c)^2 + 3u^4 -16S_cu^2)}{6(S_c)^4s_0}$

## 性能估计

## 最终结论

## 问题提出与解决

1. 在文章中，没有对每个orderer的Memory pool的容量进行假设；
   * 就目前来看，以后写文章的时候应该提出假设：Assuming that the memory pool of each orderer should be big enough to store all trasnactions/records that received from entrys.
2. 


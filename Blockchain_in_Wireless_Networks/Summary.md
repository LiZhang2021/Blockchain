# 无线网络中的区块链

无线网络中资源有限的设备不能使用消耗物理资源的工作量证明作为系统共识机制。因此，如何在无线区块系统上尽可能节约资源的达成一致是无线区块链系统急需解决的问题。

## 无线网络中的区块链协议

在设计无线区块链协议时，主要从系统模型、协议架构，协议分析以及仿真试验这几个方面入手。我们将分别总结在区块链中这几个部分的特点。

### 系统模型

在设计无线网络区块链协议时，重点要考虑网络模型、干扰模型以及攻击者模型。

#### 网络模型

首先需要定义区块链系统中网络模型的构建，并且定义每个节点的基本设置参数。
* 系统是由 $n$ 个节点组成，节点集合记作 $V = { V_1, \cdots, V_n}$；
* 节点通过发送信号进行通信，每个节点 $V_i$ 都是半双工收发器；
* 记 $d(u,v)$ 是节点 $u$ 和 $v$ 的欧式距离，以及 $DR(v)$ 是以 $v$ 为中心，以 $R$ 为半径的圆盘, 记 $NR(v)$ 为在 $DR(v)$ 中包括节点 $v$ 在内的节点的集合。
* 假设每个节点都知道其他节点的身份、位置以及公钥；
* 假设每个节点都可以生成密钥对并且可以访问安全EUF-CMA 数字签名方案；
* 根据适用的场景决定节点节点能否自由的加入或者离开网络（许可网络、开放网络）。

在构建网络模型时，主要是考虑节点的连接方式、节点的通信方式、节点的组成等都需要重点考虑。最重要的是节点在协议中拥有的功能（这将在后面的协议架构中讨论）。
#### 干扰模型
采用信号发射的方式传递消息的无线网络也需要考虑信号发射过程中必然存在干扰，因此需要考虑无线网络中的信道干扰模型。
* 信道传输的干扰模型主要采用信号干扰噪声模型 $SINR = \frac{\mathcal{S}}{(\mathcal{I}+\mathcal{N})} \geq \beta$，其中 $\mathcal{S} = P\cdot d(u,v)^{-\alpha}$ 是节点 $v$ 从节点 $u$ 处接收信号功率，而 $P$ 是均匀信号发射功率；
* 在节点 $v$ 处的干扰为 $\mathcal{I} = \sum_{w\in W\setminus{u}} P\cdot d(w,v)^{-\alpha}$，其中 $W$ 是在当前轮中传输的节点的集合；
* 记环境噪声为 $\mathcal{N}$，路径损耗指数为 $\alpha\in(2,6]$，阈值 $\beta > 1$ 取决于硬件。为了捕获细粒度噪声，定义 $\mathcal{N} = \mathcal{ADV}(v)$ 是由环境和敌手生成的组合噪声。
* 信号干扰噪声模型的假设：
  * 每个节点都使用先沟通的噪声阈值 $\theta$ 并且任意两节点之间的距离的界为 $R_0 = (\frac{P}{\beta\theta})^{\frac{1}{\alpha}}$； 
  * 每个节点都可以执行物理载波监听。若节点 $v$至少有一个邻居 $u$ 广播消息，那么 $v$ 要么接收消息，要么感应到信道忙碌。
   $$ v=\left\{
    \begin{aligned}
    \text{ sense idle channel} &  & \text{if } \mathcal{I+N} < \theta, \\
    \text{ receive a message}  &  & \text{if }  \mathcal{I+N} > \theta \text{ and }  SINR \geq \beta,\\
     \text{ sense busy channel}  &  & \text{if }  \mathcal{I+N} > \theta \text{ and } SINR < \beta.
    \end{aligned}
  \right.$$  

#### 攻击者模型
对于无线网络中，部分节点可能会被攻击者控制作恶使得系统最终崩溃。因此在讨论区块链系统的故障容忍性时，需要预先定义节点可能的故障行为。通常节点会出现两种故障：节点崩溃故障和节点拜占庭故障。
* **节点崩溃故障：** 在节点崩溃之前的所有消息都是正确的，一旦节点崩溃将不在进行任何工作（不在发送或者接收任何消息）；
* **节点拜占庭故障：** 节点可能发送错误消息阻止系统共识的达成，或者阻止干扰其他节点的消息传输，或者创建假身份误导其他节点。

通常为了防止系统一开始被攻击者控制，会限制攻击者的能力：
* 攻击者最多可以控制少于全网 $50\%$ 的网络资源（算力或者节点）；
* 攻击者可以发起阻塞攻击，但是为了确保无线网络中诚实节点拥有通信机会，攻击者不能阻塞所有所有轮中的通信（至少要给诚实节点留下通信的轮）。

### 协议架构

在设计区块链协议时，主要考虑系统中节点的功能、共识机制、区块（交易）验证机制、检查点机制等。其中最为重要的的部分是节点功能以及区块链系统的共识机制。

#### 节点功能函数

无线网络区块链协议的最基本构成就是节点。节点都承担了交易生成、消息发送和接收、生成区块等基本功能。为了确保系统的正常运行，需要对节点的检点函数给出相应的定义。
* 节点生成普通消息 $m$ ：
* 节点生成交易消息 $m_T$ ：
* 节点生成区块消息 $m_B$ ：
* 节点打包交易生成区块：
* 节点添加区块到区块链：
* 交易的数据结构：
* 区块的数据结构：
* 节点的数据结构：
* 消息的数据结构：

#### 共识机制

##### 区块链的共识分类
（给出区块链共识的几种主要的分类）
对于无线网络中可以采用的共识机制基于首领选举和基于委员会的共识机制
##### 基于首领选择的共识机制


##### 基于节点通信的共识机制


### 协议分析



### 仿真试验


### BLOWN区块链协议


### SENATE区块链协议


### wChain区块链协议


### 总结

## 物联网中的区块链协议

### Concordia共识协议

### Microchain共识协议


### 自适应PBFT共识协议




ڱȽļ 1.md  2.MD
***** 1.md
# 基于节点稳定度的区块链共识算

***** 2.MD
# 稳定的单委员会区块链共识算法

*****

***** 1.md
###（二）区块生成过

* **交易的提交和广播**：每个节点产生新交易之后，广播交易到网络。其他节点接收到新的交易
后，需要验证交易的合法性，验证成功后放入本地交易池
* **区块的生?*：根据节点的稳定度来确定节点被选中成为出块节点的概率，采用随机抽签的方
确定抽中的节点。当节点发现自己获得出块权限之后，会从交易池中取出交易打包成区块，并
发密钥份额给该区块的签名者，广播区块到网络
* **区块确认和上?*：接收到区块的节点验证区块和签名的合法性，如果拥有该区块的密钥份额
则会对该区块签名，并广播签名结果。当签名份额达到某一阈值之后，会对该区块形成一个最
签名，此时区块被确认并添加到各节点的本地链上

***** 2.MD
###（二）区块生成过
        
* **交易的提交和广播**：每个节点发现新交易广播到网络。节点接收到新的交易后验证交易的合
性，验证成功后放入在本地交易未处理交易池中
* **委员会选举**：根据节点的稳定度来确定节点被选中成为委员会成员的概率，采用随机抽签的
式选举委员会。采用基于平均跳数或者基于节点位置的方式从委员会成员中选举每一轮的首领
点。首领节点会生成和分发密钥份额给委员会成员
* **区块生成**：首领节点从交易池中取出交易打包成区块作为提案广播给其他委员会成员
* **区块确认和上?*：接收到区块的节点会验证区块、首领和其他签名份额的合法性。如果区块
前的签名份额未达到组合签名的阈值，则接收区块的节点会对区块签名并广播签名结果到网络
当签名份额达到阈值之后，会组合成区块的最终签名，此时区块被确认并添加到各节点的本地链
上

*****

***** 1.md

在无线多跳网络环境中，单首领的共识算法无法确保所有的节点同时维护相同的区块链。首领节
的选择也面临着比较大的资源消耗，对代币依赖、高带宽要求等问题。这些区块链共识算法并
适用于设备资源有限、节点具有高动态性和节点随时离开网络的无线多跳网络环境中，因此需
适用于无线多跳网络环境的区块链共识算法
* **资源消?*：原因？【首领节点选取时需做工作量证明的计算，因此消耗大量算力】方案？【
一种替代工作量证明的、对算力要求相对较低的首领选择方式；降低节点的挖矿难度减少工作
证明的消耗；
* **节点动态?*：原因？【节点的网络拓扑变化大且不可预测，因此节点可能会突然离开系统影
共识过程】方案？【将节点的稳定度作为首领选举的依据，确保选举的首领节点稳定性高，短
内不会离开系统；将节点到其他节点的跳数或者节点的位置作为首领选举的依据，确保首领节点
能够尽快将结果发送给其他节点，快速地达成共识；

***** 2.MD

在规模较大的无线自组织网络中，单首领节点共识算法达成共识过程缓慢，且只具有弱一致性。
了提高共识效率降低区块链出现分叉的可能性，需要设计一个适用于大规模无线自组织网络的
员会共识算法
* **共识时延?*：原因？【首领节点广播区域有限，需要多跳才能将区块传输到较远的节点，因
网络规模较大时网络传输区块所需的时间较长】方案？【多个节点达成共识之后同时传输区块
网络，降低网络广播区块到全网的时延；将节点到其他节点的跳数作为选择首领节点的一个依
，尽可能确保从该节点到其他节点的平均跳数较低低，可以有效的降低系统达成共识的时延；
* **算法弱一致?*：原因？【网络传输存在延迟，节点传输区块到全网需要一段不确定时间，且
个节点确认该区块的时间也是不一致的。】方案？【选举出一个委员会，在委员会内对于区块
成一致确保区块共识的强一致性；

*****

***** 1.md
首领节点的合法性
解决的问题：解决工作量证明选取首领节点消耗巨大算力，解决首领节点突然离开系统导致最终
法达成共识的问题，防止女巫攻击
</font>
***** 2.MD
首领节点的合法性
解决的问题：解决工作量证明选取首领节点消耗巨大算力，解决首领节点突然离开系统导致，押
机制也可以防止敌手发起女巫攻击
</font>
*****

***** 1.md

区块链系统需要共识算法确保所有节点维护相同的区块链。共识算法主要分为两部分：首领节点
选举和区块确认。我们将根据节点的稳定度随机选举首领节点。稳定度高的节点具有更大的概
被选中，稳定度低的节点被选中的概率将更小。区块的确认则是采用签名方式，让区块被大部分
节点都认可后就被确认
* **随机选举首领节点**：采用随机抽签的方式选举首领节点需要满足几点：一是选择的概率与节
的稳定度相关且必须是随机的，二是随机选择是唯一的，三是随机计算的结果必须可以被其他
点验证。首领选举采用随机抽签算法，将上一个区块的高度和最终签名的哈希作为随机种子输入
随机可验证函数中得到抽签结果和证明，其他节点可以根据证明验证该节点的合法性
    * **轮盘赌抽?*
    随机抽签算法根据节点的稳定度决定节点被选中的概率。记$w_i$ 是节?$i (i = 1, \cdots N)$ 的稳
***** 2.MD

区块链系统需要共识算法确保所有节点维护相同的区块链。共识算法主要分为两部分：委员会成
和首领节点的选举、一致性协议和委员会重置。我们将根据节点的稳定度随机选举委员会成员
首领节点。稳定度高的节点具有更大的概率被选中，稳定度低的节点被选中的概率将更小。一
性协议则是采用门限签名方式，让委员会成员不需要二次通信就能对区块达成一致
* **随机选举委员会成?*：采用随机抽签算法选举委员会节点，将上一个区块的高度和最终签名
哈希作为随机种子输入随机可验证函数中得到抽签结果和证明，其他节点可以根据证明验证该
点的合法性
        * **轮盘赌抽?*
    随机抽签算法根据节点的稳定度决定节点被选中的概率。记$w_i$ 是节?$i (i = 1, \cdots N)$ 的稳
*****

***** 1.md
    $$(value,proof)=VRF(sk,Height||Signature_group)$$
    ?$\frac{value}{2^{bits(value)}}$ 落在某个节点所属的区间之内，则该节点被选举为首领
        * **验证抽签结果**
***** 2.MD
    $$(value,proof)=VRF(sk,Height||Signature_group)$$
    满足 $\frac{value}{2^{bits(value)}} > \lambda$ 的前 $C$ 个节点被选举为委员会成员
        * **验证抽签结果**
*****

***** 1.md
    $$result=VerifyVRF(pk, value, proof, Height,Signature_group)$$
    如果验证结果?$result= 1$，则首领节点的验证成功，该首领是合法的；如果结果?$result= 0$
则首领节点的合法性将不被承认
* **区块密钥份额**：节点得知自己成为首领后，会生成密钥并且将密钥份额分发到系统中。随后
首领节点生成区块并广播到网络收集其他节点对区块的签名份额
* **区块确认**：其他节点接收区块后会验证区块和出块节点的合法性。在得到最终签名之前，需
验证每个签名份额，并且有效签名份额的数量不能小于门限值。一旦区块上签名数量达到阈值
则该区块被确认可以被添加到本地区块链上
<font color = red>
重点：采用随机抽签算法选举首领和门限签名算法确认区块
难点：根据节点的稳定度快速计算所有节点被选中概率，门限签名中密钥份额的计算和分发，区
签名份额的收集和最终组合。估计首领节点广播的区块提案被系统中节点接收到的时延
解决的问题：解决节点公平性问题，确保每个节点都可能被选中成为首领获得奖励。解决无利害
系攻击问题，门限签名机制确保节点无法在多个分支上同时挖矿。解决长程攻击问题，门限签
机制确保节点无法篡改早期已经被确认的区块
</font>
***** 2.MD
    $$result=VerifyVRF(pk, value, proof, Height,Signature_group)$$
    如果验证结果?$result= 1$，则委员会节点的验证成功，该成员是合法的；如果结果为 $result= 0$
，则委员会节点的合法性将不被承认
* **首领节点选举**：每个委员会将有一个任期，每个任期又分为多个轮。每轮需要选举首领节点
成区块在委员会内部达成一致。为了降低共识时延，可以选择委员会中相互之间通信少的节点
为首领，降低网络资源消耗的同时提高共识的效率
    * **【方案一?* 通过路由算法委员会成员可以得知到其他成员节点的跳数，最终选择平均跳
最少的节点作为首领。记委员会成员数量为$C$，则委员会节点到其他节点跳数的矩阵记
    $$H = \begin{bmatrix}
    h_{11}  &   h_{12}  &   \cdots  &  h_{1C}\\
    h_{21}  &   h_{22}  &   \cdots  &  h_{2C}\\
    \vdots  &   \vdots  &   \vdots  &  \vdots\\
    h_{C1}  &   h_{C2}  &   \cdots  &  h_{CC}\\
    \end{bmatrix}$$
    其中 $h_{ij}$ 表示节点 $i$ 到节?$j$ 之间的路由跳数，?$i=j$ ?$h_{ij}=0$，表示节点到其自身
跳数为零
    * **【方案二?* 在无线网络通信中，节点的欧式距离会反映节点之间的通信情况。因此可以
据节点的位置和通信半径，采用最大独立子集的方式构建节点之间的通信骨架，最终选择出比
中心的节点作为首领
* **一致性协?*：确定委员会成员和首领之后，首领节点会生成和分发密钥份额给委员会其他成
。首领节点生成新的区块广播给委员会成员。委员会成员会验证区块、首领节点的合法性。委
会成员需要验证区块当前签名份额的有效性，并且有效签名份额的数量不能小于门限值。当签名
数量达到阈值后会组成区块的最终签名，区块会被确认达成一致。委员会成员将区块链接到区块
并广播给其他非委员会成员。接收到确认区块的节点验证区块合法性成功后将区块连接到本地
上
* **委员会重?*：委员会任期结束之后，需要更换委员会成员。根据委员会的容错率来决定更换
员会成员的数量。为了更好的确保系统的安全性，委员会成员每次最多只更换稳定度最低的 $\lf
loor\frac{C-1}{4}\rfloor$ 个节点
<font color = red>
重点：利用随机抽签算法选举委员会成员，基于跳数或者位置的方式选举首领节点。采用基于门
签名的一致性协议在委员会内对区块达成一致
难点：快速计算每个节点的稳定度和被选中概率，快速选举委员会成员和首领。获取其他节点的
数信息和位置信息。计算门限签名中密钥份额的计算和分发，区块签名份额的收集和最终组合

解决的问题：解决节点公平性问题，确保每个节点都可能被选中成为委员会成员获得奖励。委员
机制确保所有的节点都维护相同的区块链，解决区块链分叉问题
</font>
*****

***** 1.md

* **奖励机制**：当区块被确认后，生成区块的节点将获得部分区块奖励和交易费用，剩余部分的
励将分发给后一个区块的生成者。这样的奖励机制可以使得诚实节点更愿意在新区块后面挖矿
减小分叉的概率提高安全性。同时也能激励系统中的节点积极维护系统区块链，提升系统的活

* **惩罚机制**：如果节点在未到活动时间结束之前离开系统，则会扣除部分押金。当发现有节点
恶后系统也会扣除押金

***** 2.MD

* **奖励机制**：委员会任期结束，委员会内所有节点将平分任期内所有生成区块的奖励和交易费
。这样的奖励机制能激励系统中的节点积极维护系统区块链，提升系统的活性
* **惩罚机制**：如果节点在未到活动时间结束之前离开系统，则会扣除部分押金。当发现有节点
恶后系统也会扣除押金。这个机制会降低节点离线和作恶的机会

*****

***** 1.md
重点：采用奖励机制提高节点的活性和系统的安全性，使用惩罚机制降低节点作恶的动机
难点：计算奖励分配比例确保节点私自挖矿成功的概率非常低
解决的问题：解决节点缺乏活性问题，奖励机制可以激励节点积极地参与共识维护区块链。解决
点长期离线的问题，节点如果长期离线就会蒙受经济损失
</font>
***** 2.MD
重点：采用奖励机制提高节点的活性和系统的安全性，使用惩罚机制降低节点作恶的动机
难点：交易费用的计算，快速分配奖励给委员会成员
解决的问题：解决节点缺乏活性问题，奖励机制可以激励节点积极地参与共识维护区块链。节点
果长期离线就会蒙受经济损失，解决节点长期离线的问题
</font>
*****

***** 1.md
## 仿真实验
【描述：（一）实验目标，（二）实验方案（详细的实验方案，包括实验环境、实验步骤等），
***** 2.MD
## 仿真实验

【描述：（一）实验目标，（二）实验方案（详细的实验方案，包括实验环境、实验步骤等），
*****

***** 1.md

通过仿真实验测试分析采用基于稳定度的共识算法的区块系统的性能。衡量性能的两个主要参数
标是交易吞吐量和区块确认延时
* **交易吞吐?*：单位时间内处理交易的数量；
***** 2.MD

通过仿真实验测试交易吞吐量和区块确认延时分析区块系统的性能
* **交易吞吐?*：单位时间内处理交易的数量；
*****

***** 1.md

由于需要在无线自组织网络中测试区块链系统的性能，因此需要自己设计一个区块链进行数据采
和分析。实验步骤如下：
* **搭建无线自组织网?*：每个节点都以相同的移动速率在一个区域中随机运动，且在区域中的
动时间是有限的。对于节点之间的通信采用CSMA/CA作为通信协议
***** 2.MD

无线自组织网络中测试区块链系统的性能需要在自己设计一个区块链进行数据采集和分析。实验
骤如下：
* **搭建无线自组织网?*：每个节点都以相同的移动速率在网络区域中随机移动，且在区域中的
动时间是有限的。对于节点之间的通信采用CSMA/CA作为通信协议
*****

***** 1.md
* **生成交易**：构造一批不同的交易，确保他们的哈希不同。发送交易到网络中，并记录开始发
交易的时间
* **生成区块**：从参与共识的节点中选举首领节点，随后生成区块并发送到网络中，记录区块发
时间
* 确认区块：查看节点的日志中区块确认的时间并记录。同时还需要计算区块中交易的数量
* **计算区块确认延时**：计算区块生成时间和确认时间可以得出区块的确认延时
* **计算交易吞吐?*：计算一个区块中处理交易的数量，除以区块的确认时延，可以得到平均交
吞吐量

***** 2.MD
* **生成交易**：构造一批不同的交易，确保他们的哈希不同。发送交易到网络中，并记录开始发
交易的时间
* **选举委员会成?*：记录委员会选举开始的时间,根据任期长度记录委员会结束的时间
* **生成区块**：每一轮开始从委员会成员中选举首领节点，首领节点生成区块并广播到网络中，
录每轮开始时间和区块发送时间
* **确认区块**：委员会对区块达成一致结果确认区块。记录委员会节点的日志中区块确认的时间
每轮轮结束的时间和区块中交易的数量
* **计算区块确认延时**：计算区块生成时间和确认时间可以得出区块的确认延时
* **计算平均交易吞吐?*：计算一个委员会任期中所有区块中处理交易的数量，除以任期时长，
以得到平均交易吞吐量

*****

***** 1.md

* **技术难?*：无线自组织网络的搭建和参数设置，计算稳定度依据的权重系数，获取其他节点
稳定度。节点活动起止时间记录，区块发送和确认时间记录，区块中交易数量计数
* **待学习的知识**：虚拟机配置、Socket技术、C++编程语言学习

***** 2.MD

* **技术难?*：在无线自组织网络上搭建区块链系统，计算稳定度依据的权重系数，获取其他节
的稳定度。获取到其他委员会成员的跳数或者其他节点的位置。获取节点活动起止时间记录，
块发送和确认时间记录，区块中交易数量计数，更换委员会成员
* **待学习的知识**：虚拟机配置、Socket编程、C++编程语言学习
*****

